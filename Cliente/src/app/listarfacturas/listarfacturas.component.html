<div class="section banda_gris">
  <div class="container" *ngIf="!showDetail">
    <h3 class="title">Lista de Facturas</h3>
    <div class="row">
      <div *ngIf="showMessage">
        <ngb-alert [type]="alerta.type" [dismissible]="false">
          <div class="container">
            <div class="alert-wrapper">
              <button type="button" name="button" class="close" (click)="closeAlert(alerta)">
                <span aria-hidden="true">
                  <i class="now-ui-icons ui-1_simple-remove"></i>
                </span>
              </button>
              <div class="message">
                <ng-container *ngIf="alerta.icon">
                  <div class="alerta-icon">
                    <i class="now-ui-icons {{alerta.icon}}"></i>
                  </div>
                </ng-container>
                <strong>{{alerta.strong}} </strong>{{ alerta.message }}
              </div>
            </div>
          </div>
        </ngb-alert>
      </div>

    </div>
    <div class="row">

      <table id="example" class="table table-striped table-bordered" style="width:100%">
        <thead>
          <tr>
            <th>Nit Cliente</th>
            <th>Prefix</th>
            <th>Consecutive</th>
            <th>UBL</th>
            <th>Crated Date</th>
            <th>State</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let fact of listaFacturas ">
            <td>{{fact.cliente.nit}}</td>
            <td>{{fact.prefix}}</td>
            <td>{{fact.consecutive}}</td>
            <td>{{fact.ubl}}</td>
            <td>{{fact.createddate}}</td>
            <td>{{fact.state}}</td>
            <td>
              <a class="btn btn-primary" (click)="verDetalleLog(fact)"><i class="fa fa-eye color_icon"></i></a>
              <a *ngIf="fact.tieneAdjunto" class="btn btn-warning" (click)="downloadAdjunto(fact.id)"><i class="fa fa-download color_icon"></i></a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!--Detalle del log-->
  <div class="container" *ngIf="showDetail">
    <h3 class="title">Detalle Factura NÂ° <strong>{{facturaSelected!=null?facturaSelected.id:''}}</strong></h3>
    <div class="row">
      <div class="col-lg-12">
        <div class="col-lg-6">
          <label class="control-label">Nit de la empresa</label>
          <strong>{{facturaSelected.cliente.nit}}</strong>
        </div>
      </div>
      <div class="col-lg-12">
        <div class="col-lg-6">
          <label class="control-label">Fecha y hora del cargue</label>
          <strong>{{facturaSelected.createddate}}</strong>
        </div>
        <div class="col-lg-6">
          <label class="control-label">Estado</label>
          <strong>{{facturaSelected.state}}</strong>
        </div>
      </div>
    </div>
    <div class="row">
      <hr>
    </div>
    <div class="row">

      <table id="example" class="table table-striped table-bordered" style="width:100%">
        <thead>
          <tr>
            <th>Status</th>
            <th>Error</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let logseguimiento of listaLog ">
            <td>{{logseguimiento.status}}</td>
            <td>{{logseguimiento.error}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="row">
      <a class="btn btn-primary" (click)="volverLista()"><i class="fa fa-cancel color_icon"></i>Voler</a>
    </div>
  </div>



</div>

<ng-template #modal_mini let-c="close" let-d="dismiss">
  <div class="modal-header justify-content-center">
    <div class="modal-profile">
      <i class="now-ui-icons users_circle-08"></i>
    </div>
  </div>
  <div class="modal-body">
    <div class="row">

      <table id="example" class="table table-striped table-bordered" style="width:100%">
        <thead>
          <tr>
            <th>Status</th>
            <th>Error</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let logseguimiento of listaLog ">
            <td>{{logseguimiento.status}}</td>
            <td>{{logseguimiento.error}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-link btn-neutral" (click)="c('Close click')">Close</button>
  </div>
</ng-template>

<ng-template #classic let-c="close" let-d="dismiss">
  <div class="modal-header justify-content-center">
    <button type="button" class="close" (click)="d('Cross click')">
      <i class="now-ui-icons ui-1_simple-remove"></i>
    </button>
    <h4 class="title title-up">Modal title</h4>
  </div>
  <div class="modal-body">
    <div class="row">

      <table id="example" class="table table-striped table-bordered" style="width:100%">
        <thead>
          <tr>
            <th>Status</th>
            <th>Error</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let logseguimiento of listaLog ">
            <td>{{logseguimiento.status}}</td>
            <td>{{logseguimiento.error}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default">Nice Button</button>
    <button type="button" class="btn btn-danger" (click)="c('Close click')">Close</button>
  </div>
</ng-template>

<div class="section banda_gris">
  <div class="container" *ngIf="!showDetail">
    <h3 class="title">Funcionalidad para el administrador</h3>
    <div class="row">

      <button type="button" class="btn btn-primary" (click)="reprocesarDian()">Reprocesar DIAN</button>
    </div>
  </div>
</div>